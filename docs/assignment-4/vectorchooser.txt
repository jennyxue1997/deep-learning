<!-- Contributed by David Bau, in the public domain -->

<template>
<div class="vectorlist">
  <div v-for="(vector, index) in vectors" class="vector">
    <input v-model="vector.text">
    <button @click="selectVector(index)">&rarr;</button>
    <button @click="deleteVector(index)">x</button>
  </div>
  <div class="operation">
  <button @click="saveVector()">Save current sample</button>
  </div>
  <div class="operation">
  <button @click="applyVectorMath()">Apply vector math</button>
  </div>
  <div class="operation">
  <button @click="getKNN()">Apply KNN </button>
  </div>
  <div class="operation">
  <button @click="getAverageFont()"> Get Average Font </button>
  </div>
  <div class="operation">
  <button @click="getSkinnyVector()"> Skinnify </button>
  </div>
  <div class="operation">
  <button @click="get3dVector()"> Hollow </button>
  </div>
  <div class="operation">
  <button @click="getoppositeBold()"> Extra Bold </button>
  </div>
  <div class="operation">
  <button @click="getoppositeBackground()"> Background </button>
  </div>
  <div class="operation">
  <button @click="uppertoLower()"> Lower Case </button>
  </div>
  <div class="operation">
  <button @click="favorite()"> Favorite </button>
  </div>
</div>
</template>

<script>
import {Array1D, ENV} from 'deeplearn';

const math = ENV.math;

//This json file includes all of the Font IDs in our database and their 40-dimensional logits vector.
var json = require('../embeddings.json');

export default {
  props: {
    selectedSample: { },
    model: { },
    vectors: { type: Array, default: () => [ { text: "0" } ] }
  },
  methods: {
    saveVector() {
      this.selectedSample.data().then(x =>
         this.vectors.push({ text: Array.prototype.slice.call(x).join(',') })
      );
    },
    deleteVector(index) {
      this.vectors.splice(index, 1);
    },
    selectVector(index) {
      this.$emit("select", { selectedSample: this.model.fixdim(
           Array1D.new(this.vectors[index].text.split(',').map(parseFloat)))});
    },
    // TODO: Add useful vector space operations here -->
    applyVectorMath() {
      this.$emit("select", { selectedSample:
           math.add(this.selectedSample, this.model.fixdim(
               Array1D.new([0.053,0.026,-0.060,-0.014,-0.093,-0.018,0.087,0.096,-0.039,0.071,0.111,-0.022,-0.007,0.022,-0.032,0.141,0.126,-0.015,-0.075,0.120,0.068,0.021,0.104,-0.065,-0.085,-0.018,-0.038,-0.059,-0.051,-0.056,0.154,-0.044,-0.116,0.038,-0.144,-0.103,-0.032,0.059,-0.076,-0.030]))) } )
    },
    getCosineSimilarity(vector1, vector2) {
      // Absolute value of dot product divided by product of norms
      var dotProduct = 0;
      var v1Norms = 0;
      var v2Norms = 0;
      for (var i = 0; i < vector1.length; i++) {
        dotProduct += vector1[i] * vector2[i];
        v1Norms += vector1[i] ** 2;
        v2Norms += vector2[i] ** 2;
      }
      return Math.abs(dotProduct / Math.sqrt(v1Norms * v2Norms));
    },
    getKNN() {
      var cosineSimilarities = Array(json.length);
      var maxSimilarity = 0;
      var id = 0;
      var selectedPromise = this.selectedSample.data().then((selectedData) => {
        for (var i = 0; i < json.length; i++) {
          var currentSimilarity =  this.getCosineSimilarity(selectedData, json[i]);
          cosineSimilarities[i] = currentSimilarity;
          if (currentSimilarity > maxSimilarity) {
            id = i;
            maxSimilarity = currentSimilarity;
          }
        }
        console.log("Most similar ID: ", id);
        return id;
      });
    },

    getAverageFont() {
      var averageFont = Array(40);
      for (var i = 0; i < averageFont.length; i++) {
        var dimensions = 0;
        for (var j = 0; j < json.length; j++) {
          dimensions += json[j][i];
        }
        averageFont[i] = dimensions / json.length;
      }

      var cosineSimilarities = Array(json.length);
      var maxSimilarity = 0;
      var id = 0;
      for (var i = 0; i < json.length; i++) {
          var currentSimilarity =  this.getCosineSimilarity(averageFont, json[i]);
          cosineSimilarities[i] = currentSimilarity;
          if (currentSimilarity > maxSimilarity) {
            id = i;
            maxSimilarity = currentSimilarity;
          }
        }
      console.log("Average Font:", id);
      return id;
    },

    getSkinnyVector() {
      var v = [
              [0.05237549543380737, 0.0728234052658081, 0.11691199243068695, -0.05981186777353287, -0.18724612891674042, 0.11216840147972107, -0.0784888043999672, -0.06233111396431923, 0.07618322968482971, 0.034886304289102554, 0.06441003829240799, -0.08883621543645859, 0.015164283104240894, -0.0003436068072915077, -0.13901664316654205, -0.057327691465616226, -0.04626337066292763, -0.04745899885892868, 0.060828883200883865, -0.0019554581958800554, -0.013476083986461163, -0.08699066936969757, -0.008786017075181007, -0.08378944545984268, 0.12763014435768127, 0.030433237552642822, -0.028541497886180878, 0.016513677313923836, 0.0029426533728837967, 0.03862499073147774, 0.00039665642543695867, 0.08381538093090057, -0.0368385910987854, 0.1341867297887802, -0.004723602905869484, 0.06463500112295151, 0.13117949664592743, 0.005032040178775787, -0.12675341963768005, -0.01717289723455906],
              [0.060838114470243454, -0.013815824873745441, -0.009833709336817265, 0.06251607090234756, -0.12931369245052338, 0.025106940418481827, -0.1379881054162979, -0.04071413725614548, 0.03267702832818031, 0.04239577800035477, 0.13510504364967346, 0.07510393857955933, -0.05828804522752762, -0.057700347155332565, 0.026631303131580353, -0.08205944299697876, -0.056363023817539215, 0.03979635611176491, -0.007610267493873835, 0.0504043810069561, -0.04365837946534157, -0.034510672092437744, -0.11935002356767654, 0.023755403235554695, 0.03979826346039772, -0.02304481342434883, -0.13618052005767822, -0.10297185927629471, 0.16937971115112305, -0.0643082782626152, 0.005497663747519255, 0.07369037717580795, -0.1125415489077568, 0.09415094554424286, 0.05534643679857254, 0.1648736149072647, 0.023071255534887314, 0.04549485445022583, -0.06387857347726822, 0.1308468133211136],
              [0.09435772150754929, -0.03749778866767883, 0.1151883602142334, 0.0813569575548172, -0.060867972671985626, -0.028510848060250282, -0.10408652573823929, -0.007765559013932943, 0.05598173663020134, 0.15711164474487305, 0.04081670939922333, 0.01111807394772768, -0.040788684040308, -0.04889233037829399, -0.003793631913140416, -0.1274443417787552, -0.2499094158411026, 0.010680281557142735, -0.10955861955881119, 0.004279257729649544, -0.08864446729421616, -0.1339198797941208, -0.12176832556724548, 0.0761074498295784, 0.1303982436656952, 0.04844160005450249, -0.17278467118740082, -0.15995584428310394, 0.20992064476013184, -0.09468615800142288, 0.01135963574051857, 0.06064888462424278, -0.13349053263664246, 0.067459836602211, 0.10001862794160843, 0.19399382174015045, 0.06808280944824219, -0.029218319803476334, 0.0065034618601202965, 0.0502503328025341],
              [-0.021283864974975586, -0.07535076141357422, 0.11044198274612427, 0.053574927151203156, -0.11206716299057007, 0.07903055101633072, -0.047602616250514984, 0.11927622556686401, -0.0019653383642435074, 0.09056901186704636, 0.13757675886154175, -0.12418127804994583, -0.0815451368689537, 0.011231291107833385, 0.10353769361972809, -0.1268470138311386, -0.16172455251216888, -0.025830483064055443, -0.10334761440753937, -0.03208647295832634, 0.06407797336578369, -0.20415687561035156, -0.0787644237279892, -0.034446749836206436, 0.05980449542403221, 0.050695281475782394, -0.1952926516532898, -0.1987239122390747, 0.19410081207752228, -0.055302973836660385, 0.053734421730041504, -0.00950729288160801, -0.1538522094488144, -0.004983650054782629, 0.10412948578596115, 0.16056892275810242, -0.0005996095715090632, -0.03962366655468941, -0.11746423691511154, -0.09092363715171814],
              [-0.03275471180677414, -0.057235412299633026, 0.030768390744924545, 0.08188622444868088, -0.005002008285373449, 0.10202758759260178, -0.0977790430188179, 0.06912367045879364, 0.07094220072031021, 0.11018460988998413, 0.016764607280492783, 0.022407125681638718, 0.005050548352301121, 0.0341852642595768, 0.05011272057890892, -0.10617845505475998, -0.10463808476924896, -0.06017136946320534, -0.017189187929034233, 0.03893542289733887, -0.027896428480744362, -0.10151407122612, -0.12401760369539261, -0.06664179265499115, 0.12374390661716461, 0.047725945711135864, -0.05051931366324425, -0.09373418241739273, 0.10647393018007278, 0.017462018877267838, 0.08583543449640274, 0.10787397623062134, -0.06416650861501694, 0.05432261899113655, 0.032351117581129074, 0.1544046849012375, 0.11388026177883148, 0.026153692975640297, -0.15473845601081848, -0.022396354004740715],
              [-0.003090557176619768, -0.08858015388250351, 0.14628174901008606, 0.042823225259780884, -0.11936388909816742, 0.045479707419872284, -0.08486946672201157, 0.01255664974451065, 0.09768520295619965, -0.09563527256250381, 0.07188480347394943, -0.019218286499381065, -0.06153608486056328, -0.025287361815571785, 0.027858803048729897, -0.12053224444389343, -0.052018698304891586, -0.06067154183983803, -0.0032475038897246122, -0.0314410999417305, -0.13106729090213776, -0.122099369764328, -0.09821231663227081, 0.03724298253655434, 0.009901853278279305, 0.06774255633354187, -0.06508224457502365, -0.06765999644994736, 0.10059268027544022, -0.010987536050379276, 0.0017900916282087564, 0.06358274817466736, -0.05841800943017006, -0.03068370185792446, 0.13030481338500977, 0.12962627410888672, 0.03140648454427719, -0.13438209891319275, 0.015576453879475594, 0.07099238783121109]
              [0.011672654189169407, -0.10272003710269928, 0.10854268074035645, 0.09805865585803986, -0.12971113622188568, 0.007292857393622398, 0.016959475353360176, 0.08023136109113693, -0.03924670070409775, -0.026703374460339546, 0.06217249855399132, -0.032812803983688354, -0.1518261581659317, 0.15095573663711548, 0.01122357603162527, -0.012860086746513844, -0.037512414157390594, 0.13976693153381348, -0.11435458809137344, -0.050446853041648865, -0.1792069375514984, -0.08355061709880829, -0.02998974360525608, 0.0740705132484436, 0.09886772930622101, 0.018483173102140427, -0.18135276436805725, -0.13401339948177338, 0.22547779977321625, -0.13984543085098267, 0.12290934473276138, -0.04869857802987099, 0.027186529710888863, 0.04327591881155968, 0.023389294743537903, 0.213628351688385, 0.016478147357702255, -0.09255976974964142, 0.1071772500872612, 0.08768930286169052]
              [0.08132786303758621, 0.0942627340555191, 0.06657597422599792, -0.01774754747748375, 0.01362178847193718, 0.03468307480216026, -0.09916726499795914, -0.0337408222258091, 0.02240191213786602, 0.044009264558553696, -0.05938581004738808, 0.008789632469415665, 0.045360054820775986, -0.0689716637134552, 0.05284672603011131, -0.08770370483398438, -0.11039689928293228, -0.049342550337314606, 0.03422006592154503, -0.08382245898246765, 0.024056825786828995, -0.09115782380104065, -0.04093555361032486, -0.020593952387571335, 0.12671688199043274, -0.03930022940039635, -0.1487884819507599, -0.019699258729815483, 0.10844733566045761, -0.0791729986667633, -0.012370473705232143, -0.01407625526189804, -0.03161546587944031, -0.06838029623031616, -0.08999674022197723, 0.14579211175441742, 0.19670668244361877, -0.010310212150216103, -0.12784969806671143, -0.0010595861822366714],
              [0.022680126130580902, -0.1413470357656479, 0.09304129332304001, 0.06580029428005219, -0.02125220187008381, 0.012594979256391525, -0.06766066700220108, 0.10888441652059555, 0.04541667178273201, 0.09387920051813126, -0.0006310747703537345, -0.08147057890892029, 0.05148285627365112, 0.019877012819051743, 0.037678103893995285, -0.13203281164169312, -0.11269515752792358, -0.0010030276607722044, -0.017583807930350304, 0.0021292397286742926, 0.009068593382835388, -0.086745485663414, -0.11342853307723999, 0.04014360532164574, 0.09011350572109222, 0.0614810511469841, -0.08454500883817673, -0.12961377203464508, 0.11471249908208847, -0.05650043487548828, 0.1013031005859375, 0.007821144536137581, -0.10313032567501068, 0.037259574979543686, -0.01860133558511734, 0.07253149896860123, 0.10163259506225586, -0.010532896034419537, -0.12289505451917648, -0.0624723955988884],
              [0.0343124084174633, -0.18235521018505096, 0.047484301030635834, 0.06717292964458466, -0.08639733493328094, 0.09177634119987488, 0.036834780126810074, 0.0480949692428112, 0.030864093452692032, 0.03855667635798454, 0.07372050732374191, -0.014917680062353611, -0.04067893698811531, -0.062042687088251114, 0.030001454055309296, -0.15135124325752258, -0.1323070228099823, 0.0064491224475204945, -0.05942675843834877, 0.03082926943898201, -0.03767400607466698, -0.08407824486494064, -0.024581898003816605, -0.07315173745155334, 0.11720921099185944, 0.06973204016685486, -0.013452316634356976, -0.18889576196670532, 0.12804031372070312, -0.09431702643632889, -0.036663904786109924, -0.08052946627140045, -0.17279858887195587, 0.061839509755373, -0.06513682007789612, 0.10134478658437729, 0.13268433511257172, -0.15961362421512604, 0.013409922830760479, 0.06842179596424103]
              ];
      var skinnyVector = Array(40);
      for (var i = 0; i < v[0].length; i++) {
        var dimensions = 0;
        for (var j = 0; j < v.length; j++) {
          dimensions += json[j][i];
        }
        skinnyVector[i] = dimensions / v.length;
      }
      this.$emit("select", { selectedSample:
           math.add(this.selectedSample, this.model.fixdim(
               Array1D.new(skinnyVector))) } );
      console.log(skinnyVector[i]);
    },

    get3dVector() {
      var v = [
              [-0.10466622561216354, 0.058412276208400726, -0.010277858935296535, -0.0049681211821734905, 0.08503922820091248, -0.09851421415805817, 0.07987117767333984, -0.12962016463279724, 0.023634592071175575, -0.07628636062145233, -0.011023408733308315, -0.04188154265284538, -0.007828922010958195, -0.04442427307367325, 0.10019884258508682, 0.14647087454795837, -0.25617191195487976, -0.19554045796394348, 7.183676643762738e-05, -0.09793335944414139, -0.0015917883720248938, -0.11173240840435028, 0.18872801959514618, 0.1863870769739151, 0.14591950178146362, 0.11992613226175308, 0.17066475749015808, 0.02513451687991619, -0.35792282223701477, -0.010329893790185452, 0.02069866843521595, 0.08532478660345078, 0.13278479874134064, -0.043040983378887177, 0.018493205308914185, 0.04794216901063919, 0.008969921618700027, 0.12816563248634338, -0.18968018889427185, 0.10509342700242996],
              [-0.21934321522712708, 0.07382044941186905, 0.04486317187547684, -0.02954108640551567, 0.06249409168958664, -0.07743856310844421, 0.04369587451219559, -0.08356515318155289, 0.017041165381669998, -0.017167961224913597, -0.08060131222009659, 0.032405026257038116, 0.0005411324673332274, -0.04410391300916672, 0.024808993563055992, 0.15681657195091248, -0.07487992197275162, -0.08207216113805771, -0.006578601896762848, -0.03589368984103203, -0.17753970623016357, -0.10319990664720535, 0.04878305643796921, 0.13255855441093445, 0.10666820406913757, -0.023637721315026283, 0.11906968057155609, -0.03710714355111122, -0.16032226383686066, 0.030176475644111633, 0.021104929968714714, -0.24735447764396667, 0.06258266419172287, 0.06798756122589111, -0.041143499314785004, -0.007158816792070866, -0.12190677970647812, 0.025352755561470985, -0.018624309450387955, 0.11375780403614044],
              [-0.08042412251234055, 0.03635827451944351, 0.05516049638390541, -0.003168349852785468, -0.0015907282941043377, -0.07334228605031967, -0.005462402943521738, -0.04127626121044159, 0.09285382181406021, -0.09575562924146652, -0.031273871660232544, 0.009782492183148861, 0.014445963315665722, 0.01754300482571125, 0.05652474984526634, -0.01804247684776783, -0.12947490811347961, -0.05154012516140938, 0.006548894569277763, -0.09775970876216888, -0.022533420473337173, -0.11533450335264206, 0.026775654405355453, 0.052017055451869965, 0.16065585613250732, 0.010808113031089306, 0.017454419285058975, 0.014757554046809673, -0.0647001639008522, 0.03582252189517021, 0.0626550018787384, -0.016050545498728752, 0.03313199803233147, -0.05549854412674904, 0.06360273063182831, 0.01505661103874445, 0.04315456748008728, 0.003460504347458482, -0.10381060093641281, 0.05206284672021866],
              [-0.09798576682806015, 0.030782200396060944, 0.018539635464549065, -0.044676896184682846, 0.021185878664255142, -0.031205784529447556, -0.03786545991897583, 0.009079269133508205, 0.052889883518218994, -0.11731349676847458, -0.004297225270420313, -0.04031726345419884, -0.02313804067671299, -0.06540130078792572, 0.1370331048965454, 0.008313460275530815, -0.2062058001756668, -0.006432410795241594, -0.031691789627075195, -0.12391667813062668, 0.0007911914144642651, -0.19778086245059967, 0.01519026793539524, 0.012582231312990189, 0.1448318064212799, -0.0029404263477772474, -0.0008759513730183244, -0.02962508425116539, -0.1353248953819275, 0.04595540463924408, 0.0769583210349083, -0.01867680251598358, 0.10626102238893509, -0.11036255210638046, 0.0501883290708065, -0.04631877690553665, -0.005859835539013147, 0.061680540442466736, -0.09577666968107224, 0.027880921959877014],
              [-0.10594681650400162, -0.1659436821937561, -0.10177723318338394, -0.08221381157636642, -0.003930817823857069, -0.055041659623384476, 0.1699121594429016, -0.08106861263513565, 0.09737448394298553, -0.05290437117218971, 0.10707180202007294, 0.045178066939115524, 0.00794422160834074, -0.08458780497312546, 0.07338688522577286, -0.0629701241850853, -0.1460794359445572, -0.12670202553272247, -0.09644471108913422, -0.2474600076675415, 0.07365353405475616, -0.004536264110356569, 0.11940493434667587, 0.013531208969652653, 0.10696052014827728, -0.054185472428798676, 0.11531186103820801, -0.11004970967769623, -0.2152225226163864, 0.16303518414497375, 0.19579337537288666, 0.09197806566953659, 0.14710348844528198, -0.16775846481323242, -0.0013698346447199583, -0.03271535038948059, -0.015356624498963356, 0.027704786509275436, -0.27756381034851074, 0.10231920331716537],
              [-0.45630931854248047, -0.1701585203409195, -0.2449718415737152, 0.2253636121749878, 0.13416221737861633, -0.033835094422101974, 0.3271455466747284, -0.03212063014507294, 0.10455086827278137, -0.1501287966966629, 0.024246469140052795, -0.1462416648864746, -0.3103902041912079, -0.05420653149485588, 0.2735755145549774, -0.21628238260746002, -0.18545815348625183, -0.3325338065624237, -0.10122357308864594, 0.024190016090869904, -0.1912199854850769, -0.09063851088285446, -0.1781412661075592, -0.08005646616220474, -0.02863011136651039, 0.07438364624977112, 0.15435166656970978, -0.17547208070755005, -0.2987770736217499, -0.041721757501363754, 0.02092520147562027, 0.2347067892551422, -0.0774073377251625, -0.11498646438121796, 0.38756927847862244, 0.23364344239234924, 0.21378718316555023, 0.22896605730056763, -0.0711662694811821, -0.07800528407096863],
              [-0.13787607848644257, 0.17815731465816498, 0.17031188309192657, 0.2807697057723999, 0.05980544909834862, -0.0906343013048172, 0.09803851693868637, 0.04987376555800438, 0.06179482862353325, -0.1232321560382843, 0.00542545598000288, 0.004648126196116209, -0.11605016142129898, -0.23022249341011047, 0.10526514798402786, -0.021470932289958, -0.094758540391922, -0.2892897427082062, 0.05718345567584038, -0.18920128047466278, -0.16417887806892395, -0.13018378615379333, -0.08193618059158325, 0.16449770331382751, 0.1628313511610031, 0.0008370872819796205, 0.2573547661304474, 0.03967513516545296, -0.12155916541814804, -0.07626292109489441, -0.16458114981651306, -0.18609720468521118, -0.09072963893413544, 0.17013296484947205, 0.05363769456744194, 0.13403545320034027, -0.14649853110313416, -0.05064486712217331, 0.29479384422302246, 0.037837110459804535],
              [0.20209741592407227, 0.07081158459186554, 0.17612284421920776, -0.02188410796225071, 0.09164249897003174, -0.07522854208946228, -0.08852973580360413, -0.05577882006764412, 0.0386822335422039, 0.06613820046186447, 0.10505986958742142, 0.0825120210647583, -0.0021695769391953945, 0.021645529195666313, 0.031174734234809875, -0.021560581400990486, -0.08775810897350311, 0.05781325325369835, -0.11791778355836868, -0.011896399781107903, 0.004238730296492577, -0.023002346977591515, 0.11815319955348969, -0.01990346424281597, 0.03796335309743881, 0.12084454298019409, -0.1145084872841835, -0.1654035896062851, 0.023526499047875404, -0.039243899285793304, 0.2198370397090912, -0.15225346386432648, 0.04812827706336975, -0.14621466398239136, 0.03991614282131195, 0.10678134113550186, 0.04758964106440544, -0.047031812369823456, -0.1568925678730011, -0.11119456589221954],
              [-0.056561894714832306, -0.11473491787910461, 0.11699166148900986, 0.08999552577733994, -0.039333634078502655, 0.1673327088356018, -0.11238749325275421, 0.0310862734913826, 0.047825708985328674, -0.11990770697593689, 0.03721248358488083, -9.310978930443525e-05, 0.04088537395000458, -0.0557139590382576, 0.04064244031906128, -0.05440417304635048, -0.12188183516263962, 0.023734981194138527, -0.1499728411436081, -0.07795332372188568, -0.04048938304185867, -0.035992711782455444, -0.20316459238529205, -0.021282780915498734, 0.11217529326677322, 0.012000312097370625, -0.07838726788759232, -0.19554442167282104, 0.05537889897823334, -0.02587425522506237, 0.06214568018913269, -0.14152118563652039, -0.16250775754451752, 0.0003919725422747433, 0.10575803369283676, 0.08188451826572418, 0.04001156613230705, -0.07814272493124008, -0.12218394875526428, 0.06811784207820892],
              [0.08132786303758621, 0.0942627340555191, 0.06657597422599792, -0.01774754747748375, 0.01362178847193718, 0.03468307480216026, -0.09916726499795914, -0.0337408222258091, 0.02240191213786602, 0.044009264558553696, -0.05938581004738808, 0.008789632469415665, 0.045360054820775986, -0.0689716637134552, 0.05284672603011131, -0.08770370483398438, -0.11039689928293228, -0.049342550337314606, 0.03422006592154503, -0.08382245898246765, 0.024056825786828995, -0.09115782380104065, -0.04093555361032486, -0.020593952387571335, 0.12671688199043274, -0.03930022940039635, -0.1487884819507599, -0.019699258729815483, 0.10844733566045761, -0.0791729986667633, -0.012370473705232143, -0.01407625526189804, -0.03161546587944031, -0.06838029623031616, -0.08999674022197723, 0.14579211175441742, 0.19670668244361877, -0.010310212150216103, -0.12784969806671143, -0.0010595861822366714]
              ];
      var threedVector = Array(40);
      for (var i = 0; i < v[0].length; i++) {
        var dimensions = 0;
        for (var j = 0; j < v.length; j++) {
          dimensions += json[j][i];
        }
        threedVector[i] = dimensions / v.length;
      }
      this.$emit("select", { selectedSample:
           math.add(this.selectedSample, this.model.fixdim(
               Array1D.new(threedVector))) } );
    },

    getoppositeBold() {
        var skinny = [
                [0.05237549543380737, 0.0728234052658081, 0.11691199243068695, -0.05981186777353287, -0.18724612891674042, 0.11216840147972107, -0.0784888043999672, -0.06233111396431923, 0.07618322968482971, 0.034886304289102554, 0.06441003829240799, -0.08883621543645859, 0.015164283104240894, -0.0003436068072915077, -0.13901664316654205, -0.057327691465616226, -0.04626337066292763, -0.04745899885892868, 0.060828883200883865, -0.0019554581958800554, -0.013476083986461163, -0.08699066936969757, -0.008786017075181007, -0.08378944545984268, 0.12763014435768127, 0.030433237552642822, -0.028541497886180878, 0.016513677313923836, 0.0029426533728837967, 0.03862499073147774, 0.00039665642543695867, 0.08381538093090057, -0.0368385910987854, 0.1341867297887802, -0.004723602905869484, 0.06463500112295151, 0.13117949664592743, 0.005032040178775787, -0.12675341963768005, -0.01717289723455906],
                [0.060838114470243454, -0.013815824873745441, -0.009833709336817265, 0.06251607090234756, -0.12931369245052338, 0.025106940418481827, -0.1379881054162979, -0.04071413725614548, 0.03267702832818031, 0.04239577800035477, 0.13510504364967346, 0.07510393857955933, -0.05828804522752762, -0.057700347155332565, 0.026631303131580353, -0.08205944299697876, -0.056363023817539215, 0.03979635611176491, -0.007610267493873835, 0.0504043810069561, -0.04365837946534157, -0.034510672092437744, -0.11935002356767654, 0.023755403235554695, 0.03979826346039772, -0.02304481342434883, -0.13618052005767822, -0.10297185927629471, 0.16937971115112305, -0.0643082782626152, 0.005497663747519255, 0.07369037717580795, -0.1125415489077568, 0.09415094554424286, 0.05534643679857254, 0.1648736149072647, 0.023071255534887314, 0.04549485445022583, -0.06387857347726822, 0.1308468133211136],
                [0.09435772150754929, -0.03749778866767883, 0.1151883602142334, 0.0813569575548172, -0.060867972671985626, -0.028510848060250282, -0.10408652573823929, -0.007765559013932943, 0.05598173663020134, 0.15711164474487305, 0.04081670939922333, 0.01111807394772768, -0.040788684040308, -0.04889233037829399, -0.003793631913140416, -0.1274443417787552, -0.2499094158411026, 0.010680281557142735, -0.10955861955881119, 0.004279257729649544, -0.08864446729421616, -0.1339198797941208, -0.12176832556724548, 0.0761074498295784, 0.1303982436656952, 0.04844160005450249, -0.17278467118740082, -0.15995584428310394, 0.20992064476013184, -0.09468615800142288, 0.01135963574051857, 0.06064888462424278, -0.13349053263664246, 0.067459836602211, 0.10001862794160843, 0.19399382174015045, 0.06808280944824219, -0.029218319803476334, 0.0065034618601202965, 0.0502503328025341],
                [-0.021283864974975586, -0.07535076141357422, 0.11044198274612427, 0.053574927151203156, -0.11206716299057007, 0.07903055101633072, -0.047602616250514984, 0.11927622556686401, -0.0019653383642435074, 0.09056901186704636, 0.13757675886154175, -0.12418127804994583, -0.0815451368689537, 0.011231291107833385, 0.10353769361972809, -0.1268470138311386, -0.16172455251216888, -0.025830483064055443, -0.10334761440753937, -0.03208647295832634, 0.06407797336578369, -0.20415687561035156, -0.0787644237279892, -0.034446749836206436, 0.05980449542403221, 0.050695281475782394, -0.1952926516532898, -0.1987239122390747, 0.19410081207752228, -0.055302973836660385, 0.053734421730041504, -0.00950729288160801, -0.1538522094488144, -0.004983650054782629, 0.10412948578596115, 0.16056892275810242, -0.0005996095715090632, -0.03962366655468941, -0.11746423691511154, -0.09092363715171814],
                [-0.03275471180677414, -0.057235412299633026, 0.030768390744924545, 0.08188622444868088, -0.005002008285373449, 0.10202758759260178, -0.0977790430188179, 0.06912367045879364, 0.07094220072031021, 0.11018460988998413, 0.016764607280492783, 0.022407125681638718, 0.005050548352301121, 0.0341852642595768, 0.05011272057890892, -0.10617845505475998, -0.10463808476924896, -0.06017136946320534, -0.017189187929034233, 0.03893542289733887, -0.027896428480744362, -0.10151407122612, -0.12401760369539261, -0.06664179265499115, 0.12374390661716461, 0.047725945711135864, -0.05051931366324425, -0.09373418241739273, 0.10647393018007278, 0.017462018877267838, 0.08583543449640274, 0.10787397623062134, -0.06416650861501694, 0.05432261899113655, 0.032351117581129074, 0.1544046849012375, 0.11388026177883148, 0.026153692975640297, -0.15473845601081848, -0.022396354004740715],
                [-0.003090557176619768, -0.08858015388250351, 0.14628174901008606, 0.042823225259780884, -0.11936388909816742, 0.045479707419872284, -0.08486946672201157, 0.01255664974451065, 0.09768520295619965, -0.09563527256250381, 0.07188480347394943, -0.019218286499381065, -0.06153608486056328, -0.025287361815571785, 0.027858803048729897, -0.12053224444389343, -0.052018698304891586, -0.06067154183983803, -0.0032475038897246122, -0.0314410999417305, -0.13106729090213776, -0.122099369764328, -0.09821231663227081, 0.03724298253655434, 0.009901853278279305, 0.06774255633354187, -0.06508224457502365, -0.06765999644994736, 0.10059268027544022, -0.010987536050379276, 0.0017900916282087564, 0.06358274817466736, -0.05841800943017006, -0.03068370185792446, 0.13030481338500977, 0.12962627410888672, 0.03140648454427719, -0.13438209891319275, 0.015576453879475594, 0.07099238783121109],
                [0.011672654189169407, -0.10272003710269928, 0.10854268074035645, 0.09805865585803986, -0.12971113622188568, 0.007292857393622398, 0.016959475353360176, 0.08023136109113693, -0.03924670070409775, -0.026703374460339546, 0.06217249855399132, -0.032812803983688354, -0.1518261581659317, 0.15095573663711548, 0.01122357603162527, -0.012860086746513844, -0.037512414157390594, 0.13976693153381348, -0.11435458809137344, -0.050446853041648865, -0.1792069375514984, -0.08355061709880829, -0.02998974360525608, 0.0740705132484436, 0.09886772930622101, 0.018483173102140427, -0.18135276436805725, -0.13401339948177338, 0.22547779977321625, -0.13984543085098267, 0.12290934473276138, -0.04869857802987099, 0.027186529710888863, 0.04327591881155968, 0.023389294743537903, 0.213628351688385, 0.016478147357702255, -0.09255976974964142, 0.1071772500872612, 0.08768930286169052],
                [0.08132786303758621, 0.0942627340555191, 0.06657597422599792, -0.01774754747748375, 0.01362178847193718, 0.03468307480216026, -0.09916726499795914, -0.0337408222258091, 0.02240191213786602, 0.044009264558553696, -0.05938581004738808, 0.008789632469415665, 0.045360054820775986, -0.0689716637134552, 0.05284672603011131, -0.08770370483398438, -0.11039689928293228, -0.049342550337314606, 0.03422006592154503, -0.08382245898246765, 0.024056825786828995, -0.09115782380104065, -0.04093555361032486, -0.020593952387571335, 0.12671688199043274, -0.03930022940039635, -0.1487884819507599, -0.019699258729815483, 0.10844733566045761, -0.0791729986667633, -0.012370473705232143, -0.01407625526189804, -0.03161546587944031, -0.06838029623031616, -0.08999674022197723, 0.14579211175441742, 0.19670668244361877, -0.010310212150216103, -0.12784969806671143, -0.0010595861822366714],
                [0.022680126130580902, -0.1413470357656479, 0.09304129332304001, 0.06580029428005219, -0.02125220187008381, 0.012594979256391525, -0.06766066700220108, 0.10888441652059555, 0.04541667178273201, 0.09387920051813126, -0.0006310747703537345, -0.08147057890892029, 0.05148285627365112, 0.019877012819051743, 0.037678103893995285, -0.13203281164169312, -0.11269515752792358, -0.0010030276607722044, -0.017583807930350304, 0.0021292397286742926, 0.009068593382835388, -0.086745485663414, -0.11342853307723999, 0.04014360532164574, 0.09011350572109222, 0.0614810511469841, -0.08454500883817673, -0.12961377203464508, 0.11471249908208847, -0.05650043487548828, 0.1013031005859375, 0.007821144536137581, -0.10313032567501068, 0.037259574979543686, -0.01860133558511734, 0.07253149896860123, 0.10163259506225586, -0.010532896034419537, -0.12289505451917648, -0.0624723955988884],
                [0.0343124084174633, -0.18235521018505096, 0.047484301030635834, 0.06717292964458466, -0.08639733493328094, 0.09177634119987488, 0.036834780126810074, 0.0480949692428112, 0.030864093452692032, 0.03855667635798454, 0.07372050732374191, -0.014917680062353611, -0.04067893698811531, -0.062042687088251114, 0.030001454055309296, -0.15135124325752258, -0.1323070228099823, 0.0064491224475204945, -0.05942675843834877, 0.03082926943898201, -0.03767400607466698, -0.08407824486494064, -0.024581898003816605, -0.07315173745155334, 0.11720921099185944, 0.06973204016685486, -0.013452316634356976, -0.18889576196670532, 0.12804031372070312, -0.09431702643632889, -0.036663904786109924, -0.08052946627140045, -0.17279858887195587, 0.061839509755373, -0.06513682007789612, 0.10134478658437729, 0.13268433511257172, -0.15961362421512604, 0.013409922830760479, 0.06842179596424103]
                ];
        var bold = [
                [0.11137083172798157, 0.03203624114394188, -0.23878000676631927, -0.0723196342587471, -0.08088717609643936, 0.16747993230819702, 0.02721957489848137, -0.0951370969414711, -0.20363980531692505, 0.12039367854595184, 0.035511042922735214, 0.001414917060174048, -0.08202586323022842, -0.030461937189102173, -0.11113842576742172, 0.10120369493961334, 0.21092107892036438, 0.34126725792884827, -0.06095387414097786, 0.2682458758354187, 0.12385357916355133, 0.3169395625591278, 0.07649681717157364, -0.09838554263114929, -0.29348787665367126, -0.025644449517130852, -0.009099267423152924, -0.012821013107895851, 0.1047407016158104, 0.07530351728200912, -0.016953373327851295, 0.019439134746789932, 0.008311359211802483, 0.11586977541446686, -0.11696827411651611, -0.14396856725215912, 0.030426418408751488, 0.07375116646289825, 0.16273130476474762, -0.017360372468829155],
                [0.014850405044853687, -0.13839605450630188, -0.2498861700296402, 0.11379776149988174, 0.004664867650717497, 0.11955080926418304, 0.06163394823670387, -0.02728995308279991, -0.18199771642684937, 0.19568581879138947, 0.0556606687605381, 0.097821906208992, -0.2645043730735779, 0.09437619894742966, 0.1707141399383545, 0.12115584313869476, 0.21294836699962616, 0.13061916828155518, -0.02048315852880478, 0.16015054285526276, 0.08248916268348694, 0.32581886649131775, 0.05843421816825867, -0.10000161826610565, -0.3020367920398712, 0.03614982217550278, 0.21645410358905792, 0.019681256264448166, 0.06790357083082199, 0.1704087257385254, -0.07858172804117203, 0.05169551819562912, 0.05327039957046509, 0.13769997656345367, 0.005650646053254604, -0.13076235353946686, -0.17260204255580902, 0.06378252059221268, 0.11869601905345917, -0.029105141758918762],
                [0.1637898087501526, 0.018406493589282036, -0.3364674150943756, 0.020325470715761185, 0.1580505073070526, -0.12568283081054688, -0.06964745372533798, 0.04742581024765968, -0.24886208772659302, 0.05312906950712204, -0.16250485181808472, 0.08558649569749832, 0.18755565583705902, -0.10374675691127777, -0.10420263558626175, -0.2058979570865631, 0.2825472056865692, 0.01769089512526989, 0.03057798184454441, 0.13922707736492157, 0.15607379376888275, 0.5149272084236145, -0.038351088762283325, -0.17122218012809753, -0.1350930780172348, -0.09689656645059586, -0.027034949511289597, 0.002579818945378065, 0.42724594473838806, -0.0460648350417614, -0.2496234029531479, -0.03988054394721985, 0.02042541466653347, -0.14161783456802368, -0.14819346368312836, 0.05373743921518326, 0.15945547819137573, -0.020316632464528084, 0.22913019359111786, 0.005573684349656105],
                [-0.023753877729177475, -0.10831207036972046, -0.15522979199886322, -0.013019892387092113, -0.11221993714570999, 0.01566915027797222, -0.039456214755773544, -0.0669664666056633, -0.10725948214530945, 0.15132787823677063, 0.02974609099328518, 0.034102316945791245, -0.11075937747955322, 0.026425370946526527, 0.02726798690855503, 0.010389706119894981, 0.269103467464447, 0.16909058392047882, 0.03399961069226265, 0.27561959624290466, 0.07807135581970215, 0.24733692407608032, -0.10216281563043594, -0.0434986911714077, -0.06377308070659637, -0.09906353056430817, 0.03789018839597702, -0.04749827831983566, 0.04021436348557472, -0.06254994869232178, -0.14181138575077057, 0.02751372940838337, -0.0009236287442035973, 0.09757909178733826, 0.05058586969971657, 0.03004014864563942, 0.03745202720165253, -0.014860257506370544, 0.2536751329898834, 0.07968825101852417],
                [0.09576369822025299, -0.12246306240558624, -0.10383057594299316, -0.11356920003890991, -0.07964260876178741, -0.03486889973282814, -0.014645285904407501, 0.01693549193441868, -0.04989371821284294, 0.15799807012081146, 0.04016906023025513, 0.07558076083660126, -0.03727065399289131, -0.0023056152276694775, -0.008960891515016556, 0.028239784762263298, 0.19771017134189606, 0.1431501805782318, -0.09923919290304184, 0.16488470137119293, 0.08903750777244568, 0.23123995959758759, -0.03521254286170006, -0.0670393705368042, -0.19680273532867432, -0.0188603475689888, -0.0025081057101488113, -0.02045118808746338, 0.04888631030917168, -6.205809768289328e-06, -0.06636367738246918, 0.04680829867720604, 0.0337502658367157, 0.1470148116350174, -0.06322799623012543, 0.026069294661283493, -0.13879503309726715, 0.0037960924673825502, 0.1744837462902069, -0.016798432916402817],
                [0.029230276122689247, -0.21135978400707245, -0.13520677387714386, -0.09896543622016907, -0.03184494003653526, 0.07706984132528305, 0.11241187900304794, -0.1296374797821045, -0.11142978072166443, 0.07442090660333633, 0.16358686983585358, -0.016579097136855125, -0.14834944903850555, 0.04183153063058853, -0.15000899136066437, 0.1161530613899231, 0.1483994573354721, 0.003605117555707693, -0.01600412093102932, 0.17345000803470612, 0.028896143659949303, 0.20782360434532166, -0.15208803117275238, -0.06542611867189407, -0.09748457372188568, -0.025400297716259956, -0.008996794000267982, -0.10868284106254578, 0.016990847885608673, -0.038414955139160156, -0.20302405953407288, 0.06394078582525253, -0.0814325138926506, 0.05782613903284073, -0.06191419064998627, -0.15900343656539917, 0.022461656481027603, 0.17899638414382935, 0.20499861240386963, 0.07719985395669937],
                [0.2990950345993042, -0.07953305542469025, 0.0062438431195914745, -0.1760091483592987, -0.04179786518216133, -0.07052575051784515, -0.020835086703300476, -0.08379729092121124, -0.12864825129508972, -0.04930877313017845, 0.08473444730043411, -0.05782542750239372, -0.3528875410556793, 0.08532865345478058, -0.05099780485033989, 0.07315470278263092, 0.23246079683303833, 0.08924176543951035, -0.010210439562797546, 0.05715113878250122, -0.02235480025410652, 0.35436689853668213, 0.010794462636113167, -0.10761941969394684, -0.1609007567167282, 0.03241217881441116, -0.12096865475177765, 0.2999819219112396, 0.003970355726778507, 0.052589572966098785, -0.07672226428985596, 0.1574069708585739, 0.055700886994600296, 0.040557146072387695, -0.1608036458492279, -0.044546570628881454, -0.13349649310112, 0.016700230538845062, -0.02402379922568798, 0.001380395027808845],
                [-0.07895360141992569, -0.0737423524260521, -0.23066547513008118, -0.0582776814699173, 0.014413376338779926, 0.20266589522361755, 0.08368688076734543, 0.00666047865524888, 0.05930323153734207, -0.08501662313938141, 0.05403078347444534, -0.1476358026266098, -0.016683567315340042, 0.062206659466028214, 0.05534425377845764, -0.1540888249874115, 0.14428333938121796, 0.12687689065933228, -0.011408201418817043, 0.05805060267448425, -0.2270500510931015, 0.19949935376644135, -0.15028031170368195, -0.05727335810661316, -0.19802223145961761, 0.04865528643131256, 0.15844272077083588, 0.1014949157834053, 0.2534726858139038, -0.018873058259487152, -0.3613031208515167, 0.2891984283924103, 0.10589940845966339, 0.12846308946609497, -0.11606030911207199, -0.22012895345687866, -0.40229421854019165, 0.020634472370147705, 0.3301854729652405, -0.008612402714788914],
                [-0.07895360141992569, -0.0737423524260521, -0.23066547513008118, -0.0582776814699173, 0.014413376338779926, 0.20266589522361755, 0.08368688076734543, 0.00666047865524888, 0.05930323153734207, -0.08501662313938141, 0.05403078347444534, -0.1476358026266098, -0.016683567315340042, 0.062206659466028214, 0.05534425377845764, -0.1540888249874115, 0.14428333938121796, 0.12687689065933228, -0.011408201418817043, 0.05805060267448425, -0.2270500510931015, 0.19949935376644135, -0.15028031170368195, -0.05727335810661316, -0.19802223145961761, 0.04865528643131256, 0.15844272077083588, 0.1014949157834053, 0.2534726858139038, -0.018873058259487152, -0.3613031208515167, 0.2891984283924103, 0.10589940845966339, 0.12846308946609497, -0.11606030911207199, -0.22012895345687866, -0.40229421854019165, 0.020634472370147705, 0.3301854729652405, -0.008612402714788914],
                [0.11773238331079483, 0.01658451557159424, -0.0008442870457656682, -0.10711744427680969, -0.07236742973327637, -0.04683360829949379, 0.06942276656627655, 0.07866442948579788, -0.017848756164312363, -0.0779072716832161, -0.006781529635190964, 0.14359094202518463, -0.2272166609764099, 0.05576946958899498, -0.19898721575737, -0.04784410446882248, 0.26087290048599243, 0.15635667741298676, 0.03480911627411842, -0.1051306501030922, 0.1837039589881897, 0.29673850536346436, -0.05809904634952545, -0.09844744205474854, -0.28353461623191833, 0.214149609208107, 0.20735634863376617, 0.032882094383239746, -0.22462965548038483, 0.08501152694225311, -0.27435073256492615, -0.16854950785636902, 0.0050272527150809765, 0.11735260486602783, 0.19521522521972656, -0.07352491468191147, -0.11789043247699738, 0.052673064172267914, 0.3265901207923889, -0.04949839413166046]
                ];

        var newVector = Array(json[0].length);
        for (var j = 0; j < json[0].length; j++) {
          newVector[j] = 0;
        }

        for (var i = 0; i < skinny.length; i++) {
          for (var j = 0; j < skinny[i].length; j++) {
            newVector[j] += bold[i][j] - skinny[i][j];
          }
        }
        for (var j = 0; j < json[0].length; j++) {
          newVector[j] /= skinny.length;
        }

        this.$emit("select", { selectedSample:
             math.add(this.selectedSample, this.model.fixdim(
                 Array1D.new(newVector))) } );
    },

    getoppositeBackground() {
        var background = [
                [0.02679932489991188, 0.266422837972641, -0.2750564515590668, 0.13127949833869934, 0.03265133500099182, 0.10567507147789001, 0.19657470285892487, -0.011860699392855167, -0.03457171097397804, -0.25224581360816956, 0.0982452929019928, 0.23509086668491364, 0.14195090532302856, -0.17025738954544067, -0.07946868985891342, 0.27618563175201416, 0.268991082906723, 0.06307348608970642, -0.3353993892669678, -0.15171174705028534, 0.09065599739551544, 0.2060467004776001, 0.12369291484355927, 0.046330712735652924, 0.040680717676877975, 0.18649636209011078, 0.0676969364285469, -0.1267433911561966, -0.015408946201205254, -0.4563278555870056, 0.04080629348754883, -0.12086998671293259, 0.1398029327392578, 0.07565654814243317, -0.20209212601184845, -0.24319066107273102, 0.05239230766892433, 0.12419718503952026, 0.15223214030265808, 0.3997093737125397],
                [0.022939473390579224, 0.09688671678304672, -0.09886776655912399, 0.33409741520881653, 0.4382815659046173, -0.005046364385634661, 0.0157335065305233, -0.09543886035680771, -0.06529082357883453, -0.336820125579834, -0.10435432195663452, 0.052246030420064926, 0.033445026725530624, -0.16188901662826538, 0.13606242835521698, 0.1075657308101654, -0.0404764749109745, 0.033332545310258865, -0.08003854006528854, -0.27553418278694153, -0.11754916608333588, -0.12076229602098465, 0.08192631602287292, 0.26606112718582153, 0.3204744756221771, -0.02852441743016243, 0.21394874155521393, -0.042777299880981445, 0.024102041497826576, -0.36909955739974976, -0.30049341917037964, -0.342619925737381, 0.052802760154008865, -0.2848959267139435, -0.09947221726179123, -0.3006196618080139, -0.0052099889144301414, 0.021279320120811462, 0.32381734251976013, 0.13826578855514526],
                [-0.10568347573280334, 0.20772075653076172, -0.04646831005811691, 0.05064024776220322, 0.1641094833612442, -0.12460393458604813, 0.03686914220452309, -0.131742924451828, -0.07686284929513931, -0.17058157920837402, -0.03366684541106224, 0.0726049542427063, -0.08600584417581558, -0.17687158286571503, 0.07811477035284042, 0.20323701202869415, -0.0009236708283424377, -0.012501761317253113, -0.1185409352183342, -0.15909141302108765, -0.17119526863098145, 0.01687941513955593, -0.03844572603702545, 0.09231343865394592, -0.07555016875267029, 0.028885511681437492, -0.1705465018749237, 0.01658218912780285, -0.2062634974718094, -0.15116389095783234, 0.04007623717188835, -0.04201041907072067, 0.20475773513317108, 0.12865816056728363, 0.015169866383075714, -0.3401464521884918, -0.17228779196739197, -0.11397022753953934, 0.06222611293196678, 0.09479314833879471],
                [-0.03486216440796852, 0.08140657842159271, 0.05796365067362785, -0.07186491787433624, 0.09105336666107178, 0.15666230022907257, -0.10141482204198837, -0.16939958930015564, 0.055719632655382156, -0.13929176330566406, 0.21312449872493744, -0.06105327978730202, -0.22090893983840942, -0.12678954005241394, -0.2664339542388916, 0.05666753649711609, 0.28236350417137146, 0.31984204053878784, -0.2580595314502716, -0.03224792331457138, -0.019891761243343353, -0.03312847018241882, -0.054838843643665314, 0.23595818877220154, 0.2234998494386673, 0.03863834589719772, 0.021535420790314674, 0.1307348757982254, 0.17110352218151093, -0.08149752020835876, -0.28261134028434753, -0.420453280210495, 0.08891920000314713, 0.15526078641414642, -0.012460305355489254, -0.059670839458703995, -0.20322051644325256, 0.09902866184711456, 0.2823794186115265, 0.31182461977005005],
                [-0.1851569414138794, 0.03125191107392311, 0.11457064002752304, 0.09484294056892395, 0.21280114352703094, -0.12724833190441132, 0.04159330204129219, -0.13313893973827362, 0.04058206081390381, -0.17660227417945862, 0.08917935192584991, -0.03707423061132431, -0.3400106728076935, -0.07059112191200256, -0.10694582015275955, -0.13588695228099823, 0.20695102214813232, 0.12607085704803467, -0.03802790120244026, -0.14003348350524902, -0.20752812922000885, 0.1322396844625473, -0.13840772211551666, 0.005926164332777262, 0.024958055466413498, -0.15073654055595398, -0.13565826416015625, 0.0850086584687233, -0.006449781358242035, 0.00011590641952352598, -0.19605839252471924, -0.12758250534534454, -0.02944614551961422, 0.03951485827565193, 0.1284523606300354, -0.19673724472522736, 0.011428145691752434, 0.003904176875948906, 0.2782064974308014, 0.21095803380012512],
                [0.044593628495931625, 0.34311503171920776, 0.06420747935771942, 0.3138359785079956, -0.37889477610588074, -0.18945342302322388, 0.006630740128457546, 0.1426406353712082, -0.05303085595369339, -0.3647599220275879, 0.13796187937259674, 0.37382176518440247, -0.1151157021522522, -0.15030668675899506, -0.438387006521225, -0.14953665435314178, 0.2582263648509979, 0.13362501561641693, -0.2936226725578308, -0.23406457901000977, 0.12687169015407562, -0.009930497035384178, -0.1053423136472702, -0.029865093529224396, 0.05820099264383316, 0.2262018620967865, -0.20583538711071014, 0.0856017917394638, 0.06287013739347458, -0.053366612643003464, -0.15646329522132874, -0.036798592656850815, -0.08802037686109543, 0.44080907106399536, -0.1442752182483673, 0.19375959038734436, 0.004371337126940489, 0.007090827915817499, 0.11650870740413666, 0.13436439633369446],
                [0.014573199674487114, -0.11311017721891403, 0.03145671263337135, 0.13744954764842987, 0.08969748020172119, 0.03685902804136276, -0.006201157346367836, 0.0971597209572792, 0.0887933224439621, 0.09981947392225266, 0.05722382664680481, 0.12616264820098877, 0.1718858778476715, 0.03078918159008026, 0.0906594768166542, -0.0029011478181928396, -0.17489232122898102, -0.06571126729249954, -0.09136858582496643, -0.1060829684138298, 0.041853487491607666, -0.12142936885356903, 0.057336632162332535, 0.13215897977352142, 0.13582700490951538, -0.0002996146504301578, -0.04689093679189682, -0.16406697034835815, 0.0002863729605451226, -0.037884362041950226, 0.113946832716465, -0.0798434466123581, -0.07472702860832214, -0.08908712863922119, -0.01343279518187046, 0.08681775629520416, -0.07825411856174469, -0.042813125997781754, -0.03785698488354683, 0.010204825550317764],
                [-0.20519176125526428, 0.22628946602344513, 0.18839479982852936, 0.12028026580810547, 0.18411605060100555, 0.1487516313791275, -0.03933579847216606, -0.07631663233041763, 0.2936849892139435, -0.01121628936380148, 0.142075315117836, 0.004359781742095947, -0.2181444764137268, 0.08370164036750793, 0.08821653574705124, -0.11472532153129578, 0.2294296771287918, -0.29216691851615906, -0.21363697946071625, -0.1852269321680069, -0.234614297747612, -0.07814980298280716, -0.030601680278778076, 0.02073048986494541, -0.002798577304929495, 0.19297552108764648, -0.013563328422605991, -0.04887432977557182, 0.2224590927362442, -0.07609042525291443, -0.1003245934844017, 0.03180203214287758, -0.1222754642367363, 0.08871970325708389, 0.17893773317337036, 0.15649746358394623, 0.18268983066082, -0.02463650330901146, -0.12175547331571579, 0.09106330573558807],
                [0.288408100605011, -0.08223231881856918, -0.076845183968544, 0.09025298058986664, 0.018922969698905945, 0.02736317738890648, -0.24273256957530975, 0.37008994817733765, -0.027470968663692474, 0.3992617428302765, 0.0097519401460886, -0.07837013900279999, -0.1263040006160736, 0.11174007505178452, 0.20351359248161316, 0.10768134146928787, -0.01738421805202961, 0.2866515517234802, 0.018839584663510323, 0.5358821749687195, 0.15862953662872314, 0.3648938834667206, -0.2905823290348053, -0.4181053042411804, -0.44366031885147095, 0.13077884912490845, -0.5086396336555481, -0.5078871250152588, -0.2628420293331146, 0.09740952402353287, 0.1400705873966217, 0.3001396954059601, -0.36723238229751587, 0.28652358055114746, -0.0022889261599630117, -0.2393844574689865, -0.06311085820198059, -0.039161279797554016, -0.20411871373653412, -0.390298068523407],
                [0.15702101588249207, -0.06765862554311752, -0.16208553314208984, -0.0756152868270874, -0.16239123046398163, 0.36907827854156494, -0.04587388411164284, -0.05987614765763283, -0.12430256605148315, 0.14520220458507538, 0.04802935943007469, -0.06287609785795212, -0.062278956174850464, 0.019379353150725365, 0.05708834156394005, -0.05801155045628548, 0.2711172103881836, 0.3699469268321991, -0.12466195970773697, 0.28588172793388367, 0.2262096107006073, 0.4652112126350403, 0.10928521305322647, -0.3079143464565277, -0.2941100597381592, 0.1035638302564621, -0.08681458234786987, -7.839832687750459e-05, 0.23231035470962524, 0.20060576498508453, -0.09515561908483505, 0.03942815586924553, 0.020267657935619354, -0.1745671033859253, -0.17097444832324982, -0.1138777807354927, 0.008350192569196224, -0.06601008027791977, 0.23287427425384521, -0.12540511786937714]
                ];
        var nonbackground = [
                [-0.021283864974975586, -0.07535076141357422, 0.11044198274612427, 0.053574927151203156, -0.11206716299057007, 0.07903055101633072, -0.047602616250514984, 0.11927622556686401, -0.0019653383642435074, 0.09056901186704636, 0.13757675886154175, -0.12418127804994583, -0.0815451368689537, 0.011231291107833385, 0.10353769361972809, -0.1268470138311386, -0.16172455251216888, -0.025830483064055443, -0.10334761440753937, -0.03208647295832634, 0.06407797336578369, -0.20415687561035156, -0.0787644237279892, -0.034446749836206436, 0.05980449542403221, 0.050695281475782394, -0.1952926516532898, -0.1987239122390747, 0.19410081207752228, -0.055302973836660385, 0.053734421730041504, -0.00950729288160801, -0.1538522094488144, -0.004983650054782629, 0.10412948578596115, 0.16056892275810242, -0.0005996095715090632, -0.03962366655468941, -0.11746423691511154, -0.09092363715171814],
                [0.014850405044853687, -0.13839605450630188, -0.2498861700296402, 0.11379776149988174, 0.004664867650717497, 0.11955080926418304, 0.06163394823670387, -0.02728995308279991, -0.18199771642684937, 0.19568581879138947, 0.0556606687605381, 0.097821906208992, -0.2645043730735779, 0.09437619894742966, 0.1707141399383545, 0.12115584313869476, 0.21294836699962616, 0.13061916828155518, -0.02048315852880478, 0.16015054285526276, 0.08248916268348694, 0.32581886649131775, 0.05843421816825867, -0.10000161826610565, -0.3020367920398712, 0.03614982217550278, 0.21645410358905792, 0.019681256264448166, 0.06790357083082199, 0.1704087257385254, -0.07858172804117203, 0.05169551819562912, 0.05327039957046509, 0.13769997656345367, 0.005650646053254604, -0.13076235353946686, -0.17260204255580902, 0.06378252059221268, 0.11869601905345917, -0.029105141758918762],
                [0.1637898087501526, 0.018406493589282036, -0.3364674150943756, 0.020325470715761185, 0.1580505073070526, -0.12568283081054688, -0.06964745372533798, 0.04742581024765968, -0.24886208772659302, 0.05312906950712204, -0.16250485181808472, 0.08558649569749832, 0.18755565583705902, -0.10374675691127777, -0.10420263558626175, -0.2058979570865631, 0.2825472056865692, 0.01769089512526989, 0.03057798184454441, 0.13922707736492157, 0.15607379376888275, 0.5149272084236145, -0.038351088762283325, -0.17122218012809753, -0.1350930780172348, -0.09689656645059586, -0.027034949511289597, 0.002579818945378065, 0.42724594473838806, -0.0460648350417614, -0.2496234029531479, -0.03988054394721985, 0.02042541466653347, -0.14161783456802368, -0.14819346368312836, 0.05373743921518326, 0.15945547819137573, -0.020316632464528084, 0.22913019359111786, 0.005573684349656105],
                [-0.023753877729177475, -0.10831207036972046, -0.15522979199886322, -0.013019892387092113, -0.11221993714570999, 0.01566915027797222, -0.039456214755773544, -0.0669664666056633, -0.10725948214530945, 0.15132787823677063, 0.02974609099328518, 0.034102316945791245, -0.11075937747955322, 0.026425370946526527, 0.02726798690855503, 0.010389706119894981, 0.269103467464447, 0.16909058392047882, 0.03399961069226265, 0.27561959624290466, 0.07807135581970215, 0.24733692407608032, -0.10216281563043594, -0.0434986911714077, -0.06377308070659637, -0.09906353056430817, 0.03789018839597702, -0.04749827831983566, 0.04021436348557472, -0.06254994869232178, -0.14181138575077057, 0.02751372940838337, -0.0009236287442035973, 0.09757909178733826, 0.05058586969971657, 0.03004014864563942, 0.03745202720165253, -0.014860257506370544, 0.2536751329898834, 0.07968825101852417],
                [0.09576369822025299, -0.12246306240558624, -0.10383057594299316, -0.11356920003890991, -0.07964260876178741, -0.03486889973282814, -0.014645285904407501, 0.01693549193441868, -0.04989371821284294, 0.15799807012081146, 0.04016906023025513, 0.07558076083660126, -0.03727065399289131, -0.0023056152276694775, -0.008960891515016556, 0.028239784762263298, 0.19771017134189606, 0.1431501805782318, -0.09923919290304184, 0.16488470137119293, 0.08903750777244568, 0.23123995959758759, -0.03521254286170006, -0.0670393705368042, -0.19680273532867432, -0.0188603475689888, -0.0025081057101488113, -0.02045118808746338, 0.04888631030917168, -6.205809768289328e-06, -0.06636367738246918, 0.04680829867720604, 0.0337502658367157, 0.1470148116350174, -0.06322799623012543, 0.026069294661283493, -0.13879503309726715, 0.0037960924673825502, 0.1744837462902069, -0.016798432916402817],
                [0.029230276122689247, -0.21135978400707245, -0.13520677387714386, -0.09896543622016907, -0.03184494003653526, 0.07706984132528305, 0.11241187900304794, -0.1296374797821045, -0.11142978072166443, 0.07442090660333633, 0.16358686983585358, -0.016579097136855125, -0.14834944903850555, 0.04183153063058853, -0.15000899136066437, 0.1161530613899231, 0.1483994573354721, 0.003605117555707693, -0.01600412093102932, 0.17345000803470612, 0.028896143659949303, 0.20782360434532166, -0.15208803117275238, -0.06542611867189407, -0.09748457372188568, -0.025400297716259956, -0.008996794000267982, -0.10868284106254578, 0.016990847885608673, -0.038414955139160156, -0.20302405953407288, 0.06394078582525253, -0.0814325138926506, 0.05782613903284073, -0.06191419064998627, -0.15900343656539917, 0.022461656481027603, 0.17899638414382935, 0.20499861240386963, 0.07719985395669937],
                [-0.003090557176619768, -0.08858015388250351, 0.14628174901008606, 0.042823225259780884, -0.11936388909816742, 0.045479707419872284, -0.08486946672201157, 0.01255664974451065, 0.09768520295619965, -0.09563527256250381, 0.07188480347394943, -0.019218286499381065, -0.06153608486056328, -0.025287361815571785, 0.027858803048729897, -0.12053224444389343, -0.052018698304891586, -0.06067154183983803, -0.0032475038897246122, -0.0314410999417305, -0.13106729090213776, -0.122099369764328, -0.09821231663227081, 0.03724298253655434, 0.009901853278279305, 0.06774255633354187, -0.06508224457502365, -0.06765999644994736, 0.10059268027544022, -0.010987536050379276, 0.0017900916282087564, 0.06358274817466736, -0.05841800943017006, -0.03068370185792446, 0.13030481338500977, 0.12962627410888672, 0.03140648454427719, -0.13438209891319275, 0.015576453879475594, 0.07099238783121109],
                [0.011672654189169407, -0.10272003710269928, 0.10854268074035645, 0.09805865585803986, -0.12971113622188568, 0.007292857393622398, 0.016959475353360176, 0.08023136109113693, -0.03924670070409775, -0.026703374460339546, 0.06217249855399132, -0.032812803983688354, -0.1518261581659317, 0.15095573663711548, 0.01122357603162527, -0.012860086746513844, -0.037512414157390594, 0.13976693153381348, -0.11435458809137344, -0.050446853041648865, -0.1792069375514984, -0.08355061709880829, -0.02998974360525608, 0.0740705132484436, 0.09886772930622101, 0.018483173102140427, -0.18135276436805725, -0.13401339948177338, 0.22547779977321625, -0.13984543085098267, 0.12290934473276138, -0.04869857802987099, 0.027186529710888863, 0.04327591881155968, 0.023389294743537903, 0.213628351688385, 0.016478147357702255, -0.09255976974964142, 0.1071772500872612, 0.08768930286169052],
                [0.08132786303758621, 0.0942627340555191, 0.06657597422599792, -0.01774754747748375, 0.01362178847193718, 0.03468307480216026, -0.09916726499795914, -0.0337408222258091, 0.02240191213786602, 0.044009264558553696, -0.05938581004738808, 0.008789632469415665, 0.045360054820775986, -0.0689716637134552, 0.05284672603011131, -0.08770370483398438, -0.11039689928293228, -0.049342550337314606, 0.03422006592154503, -0.08382245898246765, 0.024056825786828995, -0.09115782380104065, -0.04093555361032486, -0.020593952387571335, 0.12671688199043274, -0.03930022940039635, -0.1487884819507599, -0.019699258729815483, 0.10844733566045761, -0.0791729986667633, -0.012370473705232143, -0.01407625526189804, -0.03161546587944031, -0.06838029623031616, -0.08999674022197723, 0.14579211175441742, 0.19670668244361877, -0.010310212150216103, -0.12784969806671143, -0.0010595861822366714],
                [0.022680126130580902, -0.1413470357656479, 0.09304129332304001, 0.06580029428005219, -0.02125220187008381, 0.012594979256391525, -0.06766066700220108, 0.10888441652059555, 0.04541667178273201, 0.09387920051813126, -0.0006310747703537345, -0.08147057890892029, 0.05148285627365112, 0.019877012819051743, 0.037678103893995285, -0.13203281164169312, -0.11269515752792358, -0.0010030276607722044, -0.017583807930350304, 0.0021292397286742926, 0.009068593382835388, -0.086745485663414, -0.11342853307723999, 0.04014360532164574, 0.09011350572109222, 0.0614810511469841, -0.08454500883817673, -0.12961377203464508, 0.11471249908208847, -0.05650043487548828, 0.1013031005859375, 0.007821144536137581, -0.10313032567501068, 0.037259574979543686, -0.01860133558511734, 0.07253149896860123, 0.10163259506225586, -0.010532896034419537, -0.12289505451917648, -0.0624723955988884],
                [0.0343124084174633, -0.18235521018505096, 0.047484301030635834, 0.06717292964458466, -0.08639733493328094, 0.09177634119987488, 0.036834780126810074, 0.0480949692428112, 0.030864093452692032, 0.03855667635798454, 0.07372050732374191, -0.014917680062353611, -0.04067893698811531, -0.062042687088251114, 0.030001454055309296, -0.15135124325752258, -0.1323070228099823, 0.0064491224475204945, -0.05942675843834877, 0.03082926943898201, -0.03767400607466698, -0.08407824486494064, -0.024581898003816605, -0.07315173745155334, 0.11720921099185944, 0.06973204016685486, -0.013452316634356976, -0.18889576196670532, 0.12804031372070312, -0.09431702643632889, -0.036663904786109924, -0.08052946627140045, -0.17279858887195587, 0.061839509755373, -0.06513682007789612, 0.10134478658437729, 0.13268433511257172, -0.15961362421512604, 0.013409922830760479, 0.06842179596424103]
                ];

       var newVector = Array(json[0].length);
        for (var j = 0; j < json[0].length; j++) {
          newVector[j] = 0;
        }

        for (var i = 0; i < background.length; i++) {
          for (var j = 0; j < background[i].length; j++) {
            newVector[j] += background[i][j] - nonbackground[i][j];
          }
        }
        for (var j = 0; j < json[0].length; j++) {
          newVector[j] /= background.length;
        }

        this.$emit("select", { selectedSample:
             math.add(this.selectedSample, this.model.fixdim(
                 Array1D.new(newVector))) } );
      },
      uppertoLower() {
        var v = [
                [0.026182793080806732, 0.11912046372890472, 0.02477625384926796, -0.03041784279048443, 0.09916216880083084, 0.04842105880379677, -0.10953234881162643, 0.17397229373455048, 0.028921974822878838, 0.04486418887972832, 0.01902199164032936, 0.052853502333164215, 0.10504842549562454, 0.003845362225547433, 0.0560050830245018, -0.020498476922512054, -0.06377257406711578, 0.025343025103211403, -0.06966035813093185, -0.04431368038058281, -0.1425250917673111, -0.10355251282453537, 0.14372605085372925, 0.02291189879179001, 0.10121769458055496, 0.0028672106564044952, -0.02652374655008316, -0.1582348495721817, -0.030048679560422897, 0.10625945031642914, 0.2245299369096756, 0.17660783231258392, 0.002701048506423831, -0.04475262388586998, 0.021280281245708466, 0.07818490266799927, -0.061732321977615356, 0.08570010215044022, -0.007346589118242264, 0.045555662363767624],
                [0.15795883536338806, -0.009663230739533901, -0.05645124614238739, 0.034700337797403336, 0.13322296738624573, 0.10449609160423279, -0.16847670078277588, 0.22662168741226196, -0.06532344222068787, 0.11720500886440277, 0.06839866936206818, 0.06711708009243011, 0.0931599885225296, 0.034368619322776794, 0.15897464752197266, -0.06031850725412369, 0.08601213991641998, 0.009101225063204765, -0.19818232953548431, -0.026022735983133316, -0.10033895820379257, 0.1606922447681427, 0.07365936785936356, 0.06481277197599411, -0.1059674397110939, -0.0040078917518258095, 0.07693597674369812, -0.07412838190793991, 0.07319746911525726, 0.05957391858100891, 0.1144012063741684, 0.0380118191242218, 0.18596921861171722, -0.04581337794661522, 0.02312437817454338, -0.010140543803572655, -0.1620304137468338, -0.012095779180526733, -0.04035243019461632, -0.058469757437705994],
                [-0.05153266340494156, 0.005761771462857723, 0.05036535486578941, 0.028943559154868126, 0.032208334654569626, -0.025342026725411415, -0.00017190077051054686, 0.0015434910310432315, 0.06937216222286224, -0.04812147095799446, -0.011648580431938171, 0.007343095261603594, 0.02389569953083992, -0.00389667646959424, 0.022190988063812256, -0.04713885113596916, -0.09177839010953903, -0.0769970566034317, 0.020979762077331543, -0.07923194020986557, -0.05981869995594025, -0.1272105574607849, -0.030086327344179153, 0.029049860313534737, 0.08338043838739395, 0.01538805104792118, -0.010613599792122841, -0.0027136378921568394, -0.01031444501131773, 0.016052555292844772, 0.0510556697845459, 0.00982710812240839, -0.013115037232637405, -0.027842184528708458, 0.0348038487136364, 0.03754620999097824, 0.0347314216196537, -0.026557091623544693, -0.07849285006523132, 0.0011020783567801118],
                [-0.04711553454399109, 0.023028623312711716, 0.06498539447784424, 0.022377850487828255, 0.022088617086410522, -0.024306993931531906, 0.0037962670903652906, 0.0021253088489174843, 0.06098727509379387, -0.04978081211447716, -0.008387030102312565, -0.005584032740443945, 0.018533548340201378, -0.0023319849278777838, 0.02721691131591797, -0.042317699640989304, -0.08509356528520584, -0.06692752242088318, 0.002357801655307412, -0.09279130399227142, -0.06196095049381256, -0.1297517567873001, -0.03592007979750633, 0.04113134369254112, 0.08426939696073532, 0.008090203627943993, -0.019043685868382454, -0.00898728147149086, -0.012927785515785217, 0.008413669653236866, 0.050469156354665756, 0.006923242937773466, -0.008909889496862888, -0.022304514423012733, 0.028224319219589233, 0.0431482307612896, 0.03233235329389572, -0.023466305807232857, -0.0577971488237381, 0.009567998349666595],
                [0.013342874124646187, 0.0506092831492424, 0.08854211866855621, 0.023622924461960793, 0.14182141423225403, 0.029957696795463562, -0.15226052701473236, 0.00349307875148952, 0.08616061508655548, -0.07607436925172806, -0.011066967621445656, -0.01277997437864542, -0.050557538866996765, -0.09035789221525192, -0.019565055146813393, -0.1731596440076828, -0.15200527012348175, -0.01472937036305666, -0.020610973238945007, -0.18569321930408478, -0.05306313559412956, -0.11187265068292618, -0.17162176966667175, 0.0836872085928917, 0.13721942901611328, -4.002442074124701e-05, -0.04615919291973114, -0.037717171013355255, 0.14494465291500092, 0.060774389654397964, -0.11495630443096161, -0.09046802669763565, -0.021131480112671852, -0.07328297197818756, -0.056343089789152145, 0.046630121767520905, 0.07912501692771912, -0.06531096994876862, -0.06016521528363228, -0.03159594535827637],
                [0.04393855482339859, 0.02715039625763893, 0.007846994325518608, 0.04103938117623329, 0.0010054124286398292, 0.09258084744215012, -0.1347225159406662, 0.10574880987405777, 0.13195501267910004, 0.04775427281856537, -0.0330914668738842, 0.0856122300028801, 0.17848454415798187, 0.07074306160211563, 0.13189734518527985, -0.07808224856853485, -0.07957947999238968, 0.009761394001543522, -0.05244312435388565, -0.10819976776838303, -0.05026271939277649, -0.09640006721019745, 0.03007468953728676, 0.09230808168649673, 0.07528996467590332, -0.051084332168102264, -0.07662662118673325, -0.06198233366012573, 0.08402502536773682, 0.015418997965753078, 0.12096450477838516, -0.04721687734127045, 0.08187443017959595, -0.051241252571344376, 0.021301250904798508, 0.04885705187916756, -0.10125257074832916, -0.03374464809894562, -0.11497632414102554, -0.04297313094139099],
                [0.016575301066040993, 0.025578757748007774, 0.03752896934747696, 0.0574505478143692, 0.03979764133691788, 0.02403430826961994, -0.04003249481320381, 0.13604314625263214, 0.13636401295661926, 0.10767386853694916, 0.07053267955780029, 0.01245440635830164, 0.07267353683710098, 0.024667154997587204, 0.11401791125535965, -0.10306184738874435, -0.08238314092159271, -0.08248288184404373, -0.055731240659952164, -0.094769686460495, 0.07062023878097534, -0.1475871354341507, 0.033788517117500305, 0.0569608099758625, 0.04902547225356102, 0.034099020063877106, -0.09863168746232986, -0.14472311735153198, 0.029566003009676933, 0.06088896468281746, 0.1363241821527481, 0.060048673301935196, 0.028351861983537674, -0.06804633140563965, 0.03329379856586456, 0.12331567704677582, -0.0025870283134281635, -0.06856665760278702, -0.11557362228631973, -0.10051488876342773],
                [0.07081998884677887, -0.053223200142383575, -0.0381484180688858, 0.10051906853914261, 0.01728007197380066, 0.05949603021144867, -0.057803425937891006, 0.12031389772891998, 0.10585933923721313, 0.04374665394425392, 0.04417271167039871, 0.07958110421895981, 0.09566861391067505, 0.10000919550657272, 0.11399994790554047, -0.04044981300830841, -0.07285027951002121, 0.025597749277949333, -0.10333049297332764, -0.11006774008274078, -0.03563017398118973, -0.1268913447856903, 0.09262179583311081, 0.0490257665514946, 0.060437459498643875, -0.0034458369482308626, -0.11485794931650162, -0.15611189603805542, 0.04668692126870155, 0.013770795427262783, 0.19522717595100403, 0.023102544248104095, -0.005218844395130873, -0.060013171285390854, -0.00044800600153394043, 0.011583068408071995, 0.035173844546079636, -0.03391224145889282, -0.10034064948558807, -0.05152718722820282],
                [0.2720891237258911, 0.11471831053495407, 0.015078323893249035, -0.20952314138412476, 0.2412792146205902, 0.0017461141105741262, -0.27226561307907104, 0.06193088740110397, 0.03887050598859787, -0.029168294742703438, -0.010646108537912369, 0.19324453175067902, 0.011019917204976082, 0.06832697242498398, -0.13825321197509766, 0.016337692737579346, 0.18789128959178925, 0.12410340458154678, -0.02028212882578373, -0.02968614175915718, -0.06060003861784935, 0.05532761663198471, 0.19487400352954865, 0.020362600684165955, -0.062338586896657944, 0.03190160542726517, -0.16794617474079132, -0.03264225646853447, -0.012347128242254257, -0.002479810267686844, 0.1163155660033226, 0.003340519266203046, 0.1492500603199005, -0.17912065982818604, 0.06525029987096786, 0.07357393205165863, -0.04876124486327171, 0.01613091304898262, -0.1777285933494568, -0.13270097970962524],
                [-0.02106945961713791, 0.010343190282583237, 0.048819225281476974, 0.040132757276296616, 0.027029529213905334, -0.01368313655257225, -0.01314042042940855, 0.009752364829182625, 0.06591545790433884, -0.04587665945291519, -0.01827339641749859, 0.02306952513754368, 0.022206133231520653, 0.028787877410650253, 0.05387810990214348, -0.04567505791783333, -0.08648433536291122, -0.07403025031089783, -0.0022730703931301832, -0.10166056454181671, -0.05965917557477951, -0.11650831997394562, -0.023880520835518837, 0.05286438390612602, 0.07058929651975632, 0.00603222381323576, -0.016318056732416153, -0.0027344641275703907, -0.0011892335023730993, -0.003560381243005395, 0.07577770948410034, 0.013974682427942753, -0.027390392497181892, -0.03238871321082115, 0.030563604086637497, 0.03670543432235718, 0.023142704740166664, -0.02835712768137455, -0.056928783655166626, 0.011342158541083336]
                ];

        var lower = Array(40);
        for (var i = 0; i < v[0].length; i++) {
          var dimensions = 0;
          for (var j = 0; j < v.length; j++) {
            dimensions += 2 * json[j][i];
          }
          lower[i] = dimensions / v.length;
        }
        this.$emit("select", { selectedSample:
            math.add(this.selectedSample, this.model.fixdim(
                Array1D.new(lower))) } );
      },

      favorite() {
        var v = [-0.0747472494840622, -0.14922179281711578, -0.12337592989206314, -0.17660850286483765, -0.017001625150442123, -0.1219402551651001, 0.09524239599704742, -0.04104548320174217, -0.16988934576511383, 0.034795697778463364, -0.08640365302562714, -0.17297084629535675, -0.10461639612913132, -0.04719303548336029, -0.0500066913664341, 0.02544276975095272, -0.004352245945483446, 0.10956694930791855, -0.1101117730140686, 0.08273739367723465, 0.12627077102661133, 0.015647362917661667, 0.1788681447505951, -0.006396321579813957, 0.06028250232338905, -0.014844333752989769, -0.07885812968015671, -0.008006053045392036, -0.0283234640955925, 0.03171318769454956, -0.0022778846323490143, -0.14832685887813568, 0.07180134952068329, -0.03946911171078682, 0.08337071537971497, 0.03742244467139244, -0.12297298014163971, 0.09505833685398102, 0.1433662325143814, -0.013761569745838642];
        this.$emit("select", { selectedSample:
            math.add(this.selectedSample, this.model.fixdim(
                Array1D.new(v))) } );
      }
    },

  watch: {
    model: function(val) {
      for (let i = 0; i < this.vectors.length; ++i) {
        let arr = this.vectors[i].text.split(',');
        if (arr.length > this.model.dimensions) {
            arr = arr.slice(0, this.model.dimensions);
        }
        while (arr.length < this.model.dimensions) {
            arr.push('0');
        }
        this.vectors[i].text = arr.join(',');
      }
    }
  },
}
</script>

<style scoped>
.vector, .operation {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  white-space: nowrap;
}

</style>
